{{extend './adminLayout.html'}}


{{block 'newPage'}}
mdui-list-item-active
{{/block}}


{{ block 'content'}}

  <link rel="stylesheet" href="/myCss/adminArticleCreate.css">

  <div class="mdui-container">
    <div class="tittle">
      <div class="mdui-textfield mdui-textfield-floating-label">
        <input id="title" class="mdui-textfield-input" type="text" placeholder="请输入文章名" required maxlength="24"/>
        <div class="mdui-textfield-error">请填写标题</div>
      </div>
    </div>
    <!-- Create the editor container -->
    <div id="edit"></div>

    <button id="update" class="mdui-btn mdui-color-orange-300 mdui-ripple">button</button>
  </div>

<script src="https://cdn.jsdelivr.net/npm/wangeditor@latest/dist/wangEditor.min.js"></script>

<script >

    const E = window.wangEditor
    const editor = new E('#edit')
    editor.config.placeholder = '请输入正文'
    editor.config.zIndex = 2
    editor.config.height = 500
    // editor.txt.html()
    // 或者 const editor = new E( document.getElementById('div1') )
    editor.create()

    const Button = document.querySelector('#update')
    Button.addEventListener('click', function(e) {
      e.preventDefault;
          // ajax
          let title = $("#title").val();
          let articleContent = editor.txt.html();
          let data = {
            title: title,
            body: articleContent
          }
          $.ajax({
            type: "POST",
            url: "/admin/article/create",
            data: data,
            error: function(request) {
              console.log('ajax post error')
            },
            success: function(response){
              console.log('Data Saved: success')
              // window.location.href="/admin/articles"
              window.location.replace(response.url)
              // alert( "Data Saved: " + msg );
            }
          });

      // console.log(editor.txt.html());
    })


</script>
{{/block}}